ext {
    targetSdkVersion = 23
    compileSdkVersion = 23
    minSdkVersion = 3
    buildToolsVersion = '23.0.1'
    versionCode = System.getenv("BUILD_NUMBER") as Integer ?: 1
    versionName = version

    junitVersion = '4.12'
    mockitoVersion = '2.0.31-beta'
    robolectricVersion = '3.0'
}

buildscript {
    repositories {
        jcenter()
        maven { url "https://plugins.gradle.org/m2/" }
        maven { url "https://jitpack.io" }
    }

    dependencies {
        ext {
            androidBuildToolsPluginVersion = '1.4.0-beta6'
            androidAptPluginVersion = '1.8'
            sdkManagerPluginVersion = '0.12.0'
            retrolambdaPluginVersion = '3.2.3'
            retrolambdaLombokPluginVersion = '0.2.3.a2'
            bintrayVersion = '1.2'
        }

        classpath "com.android.tools.build:gradle:$androidBuildToolsPluginVersion"
        classpath "com.neenbedankt.gradle.plugins:android-apt:$androidAptPluginVersion"
        //classpath "com.jakewharton.sdkmanager:gradle-plugin:$sdkManagerPluginVersion"
        //classpath "me.tatarka:gradle-retrolambda:$retrolambdaPluginVersion"
        classpath "me.tatarka.retrolambda.projectlombok:lombok.ast:$retrolambdaLombokPluginVersion"
        classpath "com.jfrog.bintray.gradle:gradle-bintray-plugin:$bintrayVersion"

        // Temporary forked packages (until official release is available)
        classpath 'com.github.JakeWharton:sdk-manager-plugin:b182b519f6'
        classpath 'com.github.denis-itskovich:gradle-retrolambda:3.2.3-fix-134.1'
    }

    configurations.classpath.exclude group: 'com.android.tools.external.lombok'
}

ext {
    androidProjectType = 'library'
    pkg_desc = 'Slim Async Android Core Library'
    pkg_labels = ['android','java','async']
}

apply plugin: "idea"
apply from: "$projectDir/gradle/android-module.gradle"
apply from: "$rootProject.projectDir/gradle/android-maven-publish.gradle"
apply from: "$rootProject.projectDir/gradle/bintray-publish.gradle"

ideaProject.doLast {
    copy { from '.' into '.idea/' include '*.ipr' rename { "modules.xml" } }
    copy { from '.' into '.idea/' include '*.iws' rename { "workspace.xml" } }
    project.delete "${project.name}.ipr"
    project.delete "${project.name}.iws"
}

repositories {
    jcenter()
    maven { url "https://jitpack.io" }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
